
# Scrum Log Week 2025-43

## Monday (October 20, 2025)
### Done since last update:
  - [x] Fixed docker-compose system test for CIDSem mockup
  - [x] Resolved HDF5 SWMR file locking errors caused by dual-process architecture
  - [x] Implemented control plane architecture: REST API now owns CIDStore, ZMQ workers run as background tasks
  - [x] Fixed background maintenance workers starting incorrectly in testing mode
  - [x] Updated `docker-entrypoint.sh`: Simplified to single-process model (REST API only)
  - [x] Updated `control_api.py`: Added FastAPI startup/shutdown event handlers to manage CIDStore lifecycle and spawn ZMQ workers
  - [x] Fixed `async_zmq_server.py`: Changed testing mode check from `self.store.testing` to `self.store.debugging`
  - [x] **System test PASSED**: 1M triples inserted at 47,026 triples/sec with 100% success rate

### Next up / To do:
  - [ ] Update remaining test files to work with 256-bit CIDs
  - [ ] Update ValueSet/VALUESET_DTYPE for 256-bit spill operations
  - [ ] Verify broader test suite compatibility
  - [ ] Update all documentation to reflect 256-bit CIDs and new architecture

### Impediments / Blockers:
  - None at the moment

### Decisions Made:
  - **Control Plane Architecture**: REST API is now the first-class citizen that owns the CIDStore instance
  - **Single Process Model**: ZMQ workers run as asyncio background tasks within the REST API process
  - **SWMR Compliance**: Only one process (REST API) opens the HDF5 file, eliminating SWMR violations
  - **Testing Mode**: Maintenance workers properly respect `store.debugging` flag to avoid background errors in tests

### Open Questions:
  - None at the moment
